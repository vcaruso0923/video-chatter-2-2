(this["webpackJsonpclient-2"]=this["webpackJsonpclient-2"]||[]).push([[0],{120:function(e,n){},122:function(e,n){},133:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(61),o=t.n(c),i=(t(74),t(66)),u=t(1),l=t(135),s=function(e){return r.a.createElement("button",{onClick:function(){var n=Object(l.a)();e.history.push("/room/".concat(n))}},"Create room")},m=t(67),f=t(68),p=t(31),d=t(62),h=t.n(d),v=t(32),g=t.n(v),b=t(33);function E(){var e=Object(p.a)(["\n    height: 200px;\n    width: 33%;\n    display: flex;\n    margin-bottom: 15px;\n"]);return E=function(){return e},e}function w(){var e=Object(p.a)(["\n    display: flex;\n    width: auto;\n    margin: 0 auto;\n    flex-wrap: wrap;\n    padding: 0;\n"]);return w=function(){return e},e}var j=b.a.div(w()),O=b.a.video(E()),k=function(e){var n=Object(a.useRef)();return Object(a.useEffect)((function(){e.peer.on("stream",(function(e){n.current.srcObject=e}))}),[]),r.a.createElement(O,{playsInline:!0,autoPlay:!0,ref:n})},y={height:window.innerHeight/2,width:window.innerWidth/2},I=function(e){var n=Object(a.useState)([]),t=Object(f.a)(n,2),c=t[0],o=t[1],i=Object(a.useRef)(),u=Object(a.useRef)(),l=Object(a.useRef)([]),s=e.match.params.roomID;return Object(a.useEffect)((function(){i.current=h.a.connect("/"),navigator.mediaDevices.getUserMedia({video:y,audio:!0}).then((function(e){u.current.srcObject=e,i.current.emit("join room",s),i.current.on("all users",(function(n){var t=[];n.forEach((function(n){var a=function(e,n,t){var a=new g.a({initiator:!0,trickle:!1,stream:t});return a.on("signal",(function(t){i.current.emit("sending signal",{userToSignal:e,callerID:n,signal:t})})),a}(n,i.current.id,e);l.current.push({peerID:n,peer:a}),t.push(a)})),o(t)})),i.current.on("user joined",(function(n){var t=function(e,n,t){var a=new g.a({initiator:!1,trickle:!1,stream:t});return a.on("signal",(function(e){i.current.emit("returning signal",{signal:e,callerID:n})})),a.signal(e),a}(n.signal,n.callerID,e);l.current.push({peerID:n.callerID,peer:t}),o((function(e){return[].concat(Object(m.a)(e),[t])}))})),i.current.on("receiving returned signal",(function(e){l.current.find((function(n){return n.peerID===e.id})).peer.signal(e.signal)}))}))}),[]),r.a.createElement("div",{className:"container-fluid centered"},r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark sticky-top"},r.a.createElement("a",{href:"https://pure-shelf-42623.herokuapp.com"},r.a.createElement("span",{className:"navbar-brand"},"Vroom")),r.a.createElement("div",{className:"justify-content-end navbar-collapse collapse"},r.a.createElement("span",{className:"navbar-text"},r.a.createElement("span",null,r.a.createElement("a",{href:"https://pure-shelf-42623.herokuapp.com/dashboard"},"Leave Room"))))),r.a.createElement(j,null,r.a.createElement(O,{muted:!0,ref:u,autoPlay:!0,playsInline:!0}),c.map((function(e,n){return r.a.createElement(k,{key:n,peer:e})}))))};var D=function(){return r.a.createElement(i.a,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/",exact:!0,component:s}),r.a.createElement(u.a,{path:"/room/:roomID",component:I})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},69:function(e,n,t){e.exports=t(133)},74:function(e,n,t){},97:function(e,n){}},[[69,1,2]]]);
//# sourceMappingURL=main.438db088.chunk.js.map